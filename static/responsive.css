/* --- Responsive Design for All Screen Sizes --- */

/* 
 * =========================================
 * Mobile Devices (Phones, up to 768px)
 * =========================================
 */
@media (max-width: 768px) {
    /* Allow the main page to scroll vertically on mobile */
    html, body {
        overflow-y: auto !important; /* Allow scrolling */
        height: auto;
    }

    /* Change the main container to a vertical layout */
    .split-container {
        flex-direction: column;
        height: auto; /* Allow content to grow */
    }

    /* ** THE FIX: Make the 3D view container more flexible ** */
    .left-panel {
        width: 100%;
        height: 40vh; /* Use viewport height for better scaling */
        min-height: 300px; /* Prevent it from becoming too small */
        overflow: hidden; /* Ensures the 3D model doesn't spill out */
    }
    
    /* ** THE FIX: Adjust the 3D transform to be less extreme ** */
    .left-panel .main {
        /* Reduced rotateX from 75deg to 60deg to make the angle less steep. */
        /* Adjusted perspective and translateZ to re-center the model in the new view. */
        transform: perspective(800px) rotateX(60deg) rotateZ(40deg) translateZ(-12vmin) !important;
    }

    /* Let the control panel flow naturally below */
    .right-panel {
        width: 100%;
        height: auto; /* Height is determined by its content */
        min-height: auto; /* Remove the old full-screen height rule */
        padding-bottom: 50px; /* Add some space at the very bottom */
    }
    
    /* Center the control panel content */
    #controls-container {
        padding: 20px;
    }

    h1 {
        font-size: 2em; /* Slightly smaller title */
    }

    h2 {
        font-size: 1.5em;
    }

    /* Make the video feed responsive */
    .video-container {
        width: 100%;
        max-width: 480px; /* Prevent it from getting too big */
        margin: 0 auto; /* Center it */
    }

    #output-canvas {
        width: 100%;
        height: auto; /* Maintain aspect ratio */
    }

    /* Stack the control buttons */
    #controls-container button {
        display: block;
        width: 80%;
        margin: 10px auto; /* Center buttons with space */
        font-size: 1.1em;
        padding: 15px;
    }
}

/* 
 * =========================================
 * Tablet Devices (up to 1024px)
 * =========================================
 */
@media (min-width: 769px) and (max-width: 1024px) {
    /* On tablets, we can keep the split view but give controls more space */
    .split-container {
        flex-direction: row;
    }

    .left-panel {
        width: 45%; /* Give less space to the 3D view */
    }

    .right-panel {
        width: 55%; /* Give more space to controls */
    }

    #controls-container {
        padding: 30px;
    }

    h1 {
        font-size: 2.5em;
    }
}

/* 
 * =========================================
 * Large Screens (TVs, very wide monitors)
 * =========================================
 */
@media (min-width: 1800px) {
    /* For very large screens, cap the width to maintain readability */
    body {
        font-size: 18px; /* Slightly increase base font size */
    }

    #controls-container {
        max-width: 800px;
        margin: 0 auto; /* Center the controls in the right panel */
        padding-top: 5vh;
    }
}